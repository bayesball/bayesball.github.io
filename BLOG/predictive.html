<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jim Albert">
<meta name="dcterms.date" content="2023-08-01">

<title>Predictive Simulation Checking: Looking for Situational Ability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="predictive_files/libs/clipboard/clipboard.min.js"></script>
<script src="predictive_files/libs/quarto-html/quarto.js"></script>
<script src="predictive_files/libs/quarto-html/popper.min.js"></script>
<script src="predictive_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="predictive_files/libs/quarto-html/anchor.min.js"></script>
<link href="predictive_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="predictive_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="predictive_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="predictive_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="predictive_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#general-predictive-simulation-approach" id="toc-general-predictive-simulation-approach" class="nav-link" data-scroll-target="#general-predictive-simulation-approach"><span class="header-section-number">2</span> General Predictive Simulation Approach</a></li>
  <li><a href="#computation-of-clutch-measures" id="toc-computation-of-clutch-measures" class="nav-link" data-scroll-target="#computation-of-clutch-measures"><span class="header-section-number">3</span> Computation of Clutch Measures</a>
  <ul class="collapse">
  <li><a href="#the-2005-david-ortiz" id="toc-the-2005-david-ortiz" class="nav-link" data-scroll-target="#the-2005-david-ortiz"><span class="header-section-number">3.1</span> The 2005 David Ortiz</a></li>
  <li><a href="#was-david-ortiz-consistently-clutch" id="toc-was-david-ortiz-consistently-clutch" class="nav-link" data-scroll-target="#was-david-ortiz-consistently-clutch"><span class="header-section-number">3.2</span> Was David Ortiz Consistently Clutch?</a></li>
  <li><a href="#situational-measures-for-two-consecutive-seasons" id="toc-situational-measures-for-two-consecutive-seasons" class="nav-link" data-scroll-target="#situational-measures-for-two-consecutive-seasons"><span class="header-section-number">3.3</span> Situational Measures for Two Consecutive Seasons</a></li>
  </ul></li>
  <li><a href="#clutch-luck-scoring" id="toc-clutch-luck-scoring" class="nav-link" data-scroll-target="#clutch-luck-scoring"><span class="header-section-number">4</span> Clutch-Luck Scoring</a>
  <ul class="collapse">
  <li><a href="#the-method" id="toc-the-method" class="nav-link" data-scroll-target="#the-method"><span class="header-section-number">4.1</span> The Method</a></li>
  <li><a href="#cluster-luck-scoring-in-2022-season" id="toc-cluster-luck-scoring-in-2022-season" class="nav-link" data-scroll-target="#cluster-luck-scoring-in-2022-season"><span class="header-section-number">4.2</span> Cluster Luck Scoring in 2022 Season</a></li>
  </ul></li>
  <li><a href="#measuring-streakiness" id="toc-measuring-streakiness" class="nav-link" data-scroll-target="#measuring-streakiness"><span class="header-section-number">5</span> Measuring Streakiness</a>
  <ul class="collapse">
  <li><a href="#introduction-1" id="toc-introduction-1" class="nav-link" data-scroll-target="#introduction-1"><span class="header-section-number">5.1</span> Introduction</a></li>
  <li><a href="#the-method-1" id="toc-the-method-1" class="nav-link" data-scroll-target="#the-method-1"><span class="header-section-number">5.2</span> The Method</a></li>
  <li><a href="#streakiness-in-the-2022-season" id="toc-streakiness-in-the-2022-season" class="nav-link" data-scroll-target="#streakiness-in-the-2022-season"><span class="header-section-number">5.3</span> Streakiness in the 2022 Season</a></li>
  </ul></li>
  <li><a href="#closing-remarks" id="toc-closing-remarks" class="nav-link" data-scroll-target="#closing-remarks"><span class="header-section-number">6</span> Closing Remarks</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">7</span> Further Reading</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Predictive Simulation Checking: Looking for Situational Ability</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jim Albert </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 1, 2023</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    In Major League Baseball there is much discussion about player and team performances in clutch or important situations during a game. Players such as David Ortiz and Reggie Jackson are famous for their performances during playoff and World Series games. The question is whether players and teams have the ability to cluster their good performances during clutch situations. We illustrate the use of a statistical approach based on simulating replicated data from a no effect model. This approach is helpful for detecting situational performances of individual hitters, of teams, and for making sense of streaky performances.
  </div>
</div>

</header>

<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>When one explores the batting statistics for a particular hitter, they can be divided into two categories:</p>
<ul>
<li><p><strong>Situational measures</strong> are measures based on the particular game situation. For example, runs batted in (RBI) describes the number of runs the batter advanced to home. Players with high RBI totals are typically those in the middle of the lineup who have many opportunities to bat with runners on base.</p></li>
<li><p><strong>Non-Situational measures</strong>, in contrast, are measures that are independent of the particular game situation. A batting average or a weighted on-base percentage (wOBA) measure is a non-situational measures since either measure has nothing to do with the number of runners on base and outs in the inning.</p></li>
</ul>
<p>This raises the question – should one be interested in situational measures for a hitter? Fans are fascinated about the performance of players in clutch situations, particular those situations towards the end of the game when the game is close and there are runners on base. In fact, players such as David Ortiz and Reggie Jackson are famous for their batting performances in these important situations during playoff games.</p>
<p>Generally one needs to make a distinction between a player’s ability which is unknown and the player’s performance which one observes over the seasons of the player’s career. Certainly players like David Ortiz have displayed remarkable clutch performances during their careers. But the interesting question is whether these players, or any players in baseball history have clutch ability.</p>
</section>
<section id="general-predictive-simulation-approach" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> General Predictive Simulation Approach</h1>
<p>Here is a general statistical approach for exploring clutch performances that is helpful for determining if particular players possess clutch ability.</p>
<ol type="1">
<li><p>(<strong>Data</strong>) We start with the data – suppose for each plate appearance (PA) of a particular batter during a particular season we collect the game situation (runners on base and number of outs) and the outcome of the PA.</p></li>
<li><p>(<strong>A Model</strong>) Consider a model where the batter has no clutch ability which implies that the PA outcomes are independent of the game situation. If we arrange the PA outcomes as one long sequence, this assumption implies that all permutations of these PA outcomes are equally likely to occur.</p></li>
<li><p>(<strong>Simulate</strong>) We simulate one occurrence of data assuming the model. Here since the model says the all arrangements of PA outcomes are equally likely, we simulate one permutation of the PA outcomes.</p></li>
<li><p>(<strong>Compute a Measure</strong>) From this simulated data, we compute a relevant measure. Here one appropriate measure would be the total runs value of the PA outcomes. We don’t know the exact runner advancement – for example, we don’t know the exact new bases situation when a single is hit with a runner on 1st base. But we can make reasonable assumptions about the new runners on base/bases situation from historical data and from this we compute a runs value.</p></li>
<li><p>(<strong>Repeat</strong>). We repeat the simulate and compute a measure steps of this process and collect the total runs values for these simulations. This collection of runs values represents what one would predict for total runs value if there was no relationship between the situation and the PA outcome.</p></li>
<li><p>(<strong>Compare with Observed</strong>). Last we compute this predictive distribution with the actual observed runs value for that player in the season. We compute a clutch measure – how likely the observed runs value exceeds the expected runs value from our model.</p></li>
</ol>
<p><span class="math display">\[
CLUTCH = RUNS_{observed} - E(RUNS)
\]</span></p>
</section>
<section id="computation-of-clutch-measures" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Computation of Clutch Measures</h1>
<section id="the-2005-david-ortiz" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="the-2005-david-ortiz"><span class="header-section-number">3.1</span> The 2005 David Ortiz</h2>
<p>We collect the outcomes and the associated situations (runners on base and number of outs) for David Ortiz during the 2005 season. There are six possible outcomes – single, double, triple, home run, walk, and out and 24 possible bases/outs situations. For each of the 6 <span class="math inline">\(\times\)</span> 24 = 144 outcome/situations, we predict the new bases/outs situation and the number of runs scored.</p>
<p>For each of Ortiz’s plate appearance, we use the runner advancement assumptions to compute the runs value of the outcome of the plate appearance. By totaling these runs values over all PAs, we obtain that Ortiz’s runs value for the 2005 season was 68.86.</p>
<p>What would Ortiz produce if the PA outcomes were independent of the situation? To answer this question, we perform the simulation experiment.</p>
<ul>
<li>Randomly mix up the sequence of 708 PA outcomes.</li>
<li>Using our runner advancement assumptions, compute the total runs values of these outcomes.</li>
<li>Repeat this mix-up process 1000 times, collecting the simulated total runs values.</li>
</ul>
<p>The following figures shows a histogram of the runs value across the 1000 simulations. We see on the average, if the PA outcomes are independent of the game situation, Ortiz would average 55 runs. The observed runs value, displayed by the red vertical line, is 68.86. So the clutch statistic for the 2005 David Ortiz is <span class="math display">\[
CLUTCH = 68.86 - 65 = 13.86.
\]</span></p>
<p><img src="figures/simulation13.png" class="img-fluid" style="width:60.0%"></p>
<p>So Ortiz was clutch in the sense that he produced more runs than one would expect if the situations were independent of the outcomes. The right-tail probability here is about 0.04 which indicates that he was “significantly” clutch for the 2005 season.</p>
</section>
<section id="was-david-ortiz-consistently-clutch" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="was-david-ortiz-consistently-clutch"><span class="header-section-number">3.2</span> Was David Ortiz Consistently Clutch?</h2>
<p>The obvious follow-up question is “Was David Ortiz consistently clutch in his career?” I went ahead and repeated this work for each of Ortiz’s seasons 2000 through 2016. For each season, I computed two numbers:</p>
<ul>
<li>the actual number of runs Ortiz produced, and</li>
<li>the mean number of runs based on the simulation assuming the “situation is independent of outcome” model.</li>
</ul>
<p>In the below figure I plot the value of the clutch statistic across all of Ortiz’s seasons.</p>
<p><img src="figures/simulation_new.png" class="img-fluid" style="width:60.0%"></p>
<p>We see that Ortiz was most clutch in 2005, producing approximately 14 additional runs, but this was unusual in his career. Note that the clutch values fluctuate around zero indicating that there is little evidence that Ortiz was consistently clutch through his career.</p>
</section>
<section id="situational-measures-for-two-consecutive-seasons" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="situational-measures-for-two-consecutive-seasons"><span class="header-section-number">3.3</span> Situational Measures for Two Consecutive Seasons</h2>
<p>Generally one way of assessing if a particular baseball measure of performance is ability-driven is to collect the measure for two consecutive seasons. If the scatterplot of the two measures displays some positive association, this indicates that the measure has an ability component. The measure for one season is somewhat predictive of the measure for the following season.</p>
<p>We implemented this method for our situational hitting measure. Here’s an outline of what I did.</p>
<ul>
<li><p>I collected the hitters who had at least 300 plate appearances in the 2021 and 2022 seasons.</p></li>
<li><p>For each player in each season, I computed <span class="math inline">\(R\)</span>, the number of runs producted and <span class="math inline">\(M\)</span>, the mean number of runs produced assuming the “situation is independent of the PA” model. So for each player we have two clutch measures:</p></li>
</ul>
<p><span class="math display">\[
Clutch_{2021} = R_{2021} - M_{2021}
\]</span></p>
<p>and</p>
<p><span class="math display">\[
Clutch_{2022} = R_{2022} - M_{2022}
\]</span></p>
<p>Each clutch statistic measures the additional runs produced by the hitter above what would be predicted from the random model.</p>
<p>The following figure displays a scatterplot of the clutch statistics for the 2021 and 2022 seasons.</p>
<p><img src="figures/simulation21.png" class="img-fluid" style="width:70.0%"></p>
<p>We see several things:</p>
<ul>
<li><p>Each clutch measure seems to be symmetric about 0. For each season, you will find players who produce 10 more runs than expected and you’ll also find players who produce 10 fewer runs than expected. There is a wide spread of clutch values for the players for a particular season.</p></li>
<li><p>There is little association in the graph. This indicates that the clutch measure is not predictive. Knowing the clutch measure for a particular player in the 2021 season doesn’t help you to predict the clutch measure for the following season.</p></li>
</ul>
</section>
</section>
<section id="clutch-luck-scoring" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Clutch-Luck Scoring</h1>
<section id="the-method" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="the-method"><span class="header-section-number">4.1</span> The Method</h2>
<p>Suppose a team scores 10 runs in a game. I would like to measure the so called “cluster luck” of this run scoring. That is, how many of these 10 runs are attributed to the fact that the team was able to cluster their on-base events? As an example, look at the June 12, 2015 game between the Red Sox and the Blue Jays where the Red Sox scored 10 runs. Using Retrosheet play-by-play data, it was straightforward to extract all of the outcomes (in sequence) of the PA’s during this game.</p>
<pre><code>[1] "OUT" "BB"  "2B"  "1B"  "OUT" "HR"  "HR"  "1B"  "1B"  "BB"  "OUT"
[12] "OUT" "1B"  "OUT" "OUT" "OUT" "1B"  "BB"  "HR"  "OUT" "OUT" "OUT"
[23] "OUT" "OUT" "OUT" "OUT" "1B"  "OUT" "OUT" "OUT" "OUT" "OUT" "OUT"
[34] "OUT" "BB"  "OUT" "OUT" "BB"  "1B"  "BB"  "OUT" "OUT" "BB"  "OUT"
[45] "2B"  "OUT"</code></pre>
<p>In this game, the Red Sox had 12 hits (7 singles, two doubles, and 3 home runs), 7 walks, and 27 outs for the nine-innings they batted in this game.</p>
<p>Suppose there is really no true clustering in the arrangement of the 46 PA outcomes above. That would suggest that all possible arrangements of these symbols is equally likely.</p>
<p>Here is how we apply predictive simulation in this setting.</p>
<ul>
<li><p>I randomly mix up these 46 symbols. Based on the outs, I can partition the mixed-up PA’s into nine innings.</p></li>
<li><p>Using a relatively simple run-scoring algorithm for each inning, I simulate the runs scored for this mixed-up game given this random arrangement of symbols.</p></li>
<li><p>I repeat the last step a large number of times, obtaining a simulated distribution of runs scored in the game if there is no true clustering. This represents the game run scoring that one would predict if these 7 singles, 2 doubles, 7 walks, 3 home runs, and 27 outs just occurred in some random fashion during the game.</p></li>
<li><p>I compare the actual run scoring with this simulated distribution – if the actual runs scored is “large” relative to the simulated distribution, then that would indicate some “cluster luck”.</p></li>
</ul>
</section>
<section id="cluster-luck-scoring-in-2022-season" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="cluster-luck-scoring-in-2022-season"><span class="header-section-number">4.2</span> Cluster Luck Scoring in 2022 Season</h2>
<p>I applied this method across all teams and games in the 2022 season. For each game, I collected the sequence of plate appearance outcomes (1B, 2B, 3B, HR, BB or HBP, OUT) and used my run scoring model to simulate the run scored assuming no real clustering of events. For each team, I compute the runs scored minus the expected runs scored from the simulations using my model.</p>
<p>Below I display a graph of the residuals (Runs Minus Expected Runs) for all games plotted against the batting team. I overlay a vertical line at zero.</p>
<p><img src="figures/simulation17.png" class="img-fluid" style="width:70.0%"></p>
<p>It is clear that my run scoring model underestimates the actual number of runs scored in these games. One can compute the the mean residual is 0.82 which means that there are, on average, 0.82 more runs scored than predicted from the model. My model is just based on the hit and walk/hbp events, ignoring runner advancements due to errors, wild pitches and sacrifices, so it is not surprising that the model would underestimate the observed runs. Also I would suspect some natural clustering of the on-base outcomes since one may be facing an unusually weak pitcher or strong pitcher in particular innings.</p>
<p>This method is helpful in measuring the cluster-luck component of scoring runs. But this exploration doesn’t find any team effect. That is, I don’t see teams that are especially good or especially weak in clustering runs.</p>
</section>
</section>
<section id="measuring-streakiness" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Measuring Streakiness</h1>
<section id="introduction-1" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="introduction-1"><span class="header-section-number">5.1</span> Introduction</h2>
<p>The predictive simulation approach is also helpful in understanding streaky hitting patterns of players. For the purposes of illustration, we define a success in a plate appearance as getting on base. Certainly, hitters have different abilities to get on base reflected in the distribution of on-base percentages. But players also display streaky on-base patterns where they have long sequences of consecutive on-base outcomes or long sequences of “not on-base” (so-called “ofer” patterns). Are these streaky patterns of hitting performance meaningful? We use a predictive simulation to address this question. Observed streakiness for players can be compared with patterns of streakiness simulated from predictive distributions from a consistent hitting model.</p>
</section>
<section id="the-method-1" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="the-method-1"><span class="header-section-number">5.2</span> The Method</h2>
<p>Here is a general outline of the approach.</p>
<ol type="1">
<li><p>(Define streakiness). For the plate appearances for a given player during a season, we have a sequence of 0-1 outcomes, where 1 corresponds to a on-base event. To measure the observed clumpiness or streakiness pattern in the sequence, look at the spacings between the successive on-base events. One streaky measure would be the sum of squared spacings. Another measure would be the maximum spacing length.</p></li>
<li><p>(Define a consistent model). One defines a model that describes a truly consistent hitter. The outcomes of this hitter are independent where the chance of getting on-base on a particular PA is <span class="math inline">\(p\)</span>. This assumes that the chance that a player gets on base is a constant value throughout the season.</p></li>
<li><p>(Estimating the on-base abilities). If we have <span class="math inline">\(N\)</span> players with on-base probabilities <span class="math inline">\(p_1, ..., p_N\)</span>, we estimate these probabilities using a multilevel model. One finds that a good estimate at the on-base probability for player <span class="math inline">\(j\)</span> has the form <span class="math display">\[
\hat p_j = \frac{y_j + a}{n_j + a + b}
\]</span> where <span class="math inline">\(y_j\)</span> is the number of on-base events in <span class="math inline">\(n_j\)</span> plate appearances and <span class="math inline">\(a, b\)</span> are estimated constants. The ability estimates shrink the observed on-base percentages <span class="math inline">\(\{y_j / n_j\}\)</span> towards a common value.</p></li>
<li><p>(The Predictive Simulation). We simulate PA outcomes from the <span class="math inline">\(N\)</span> players from a predictive distribution. We do this in two steps – we first simulate a set of on-base probabilities and then simulate the on-base outcomes using the simulated probabilities.</p></li>
</ol>
<ul>
<li><p>We simulate on-base probabilities <span class="math inline">\(p_1, ..., p_N\)</span> from independent beta distributions where <span class="math inline">\(p_j \sim beta(y_j + a, n_j + b)\)</span>. (Recall <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> are the estimated shape parameters of the beta curve found by fitting the multilevel model.)</p></li>
<li><p>We simulate replicated outcomes for the <span class="math inline">\(N\)</span> players using independent Bernoulli distributions. For the <span class="math inline">\(j\)</span>th player who has <span class="math inline">\(N_j\)</span> plate appearances, we simulate <span class="math inline">\(y_{j1}, ..., y_{jN_j}\)</span> from a Bernoulli(<span class="math inline">\(p_j\)</span>). We call these replicated outcomes, since the <span class="math inline">\(j\)</span>th player in the simulation is getting the same number of PA as he did in the season.</p></li>
<li><p>For each player, we compute a streaky measure <span class="math inline">\(S_{sim}\)</span> from the simulated outcomes.</p></li>
</ul>
<ol start="5" type="1">
<li><p>(Repeat the Simulation). We repeat this process (simulate on-base abilities and PA outcomes) for all players a large number of iterations. For a given player, we have a distribution of streaky measures <span class="math inline">\(S_{sim}\)</span> from the multiple simulations that we call the simulation distribution.</p></li>
<li><p>(Compare with Observed Streakiness). To detect unusual streakiness for a given player, we compare the simulation distribution of the streaky measure with the observed streaky measure <span class="math inline">\(S_{obs}\)</span>. In this comparison, we compute the tail probability <span class="math display">\[
Tail \, \ probability = Prob(S_{sim} \ge S_{obs}).
\]</span> If the tail probability is small, say under 10%, then this observed streakiness for this player is unusual given the consistent hitting model.</p></li>
</ol>
</section>
<section id="streakiness-in-the-2022-season" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="streakiness-in-the-2022-season"><span class="header-section-number">5.3</span> Streakiness in the 2022 Season</h2>
<p>We illustrate this approach using the on-base outcomes for all players with at least 400 PA for the 2022 season. We implement this method for one iteration – we simulate the players’ on-base percentages from the independent beta distributions, and then simulate PA outcomes from the Bernoulli distributions. From the simulated outcomes for each player, we find the maximum spacing (longest number of PA without an on-base event).</p>
<p>The following figure displays jitted dotplots of the maximum spacings for the observed and simulated data for the 204 players. We notice that four players had maximum observed spacings longer than 25 during the 2022 season. But we also see several long spacings from the simulated data.</p>
<p><img src="figures/maxspacings.png" class="img-fluid" style="width:70.0%"></p>
<p>Certainly this model is a bit simplistic. It is unrealistic to assume that a player’s on-base probability is a constant value throughout an entire season. But based on this brief exploration this consistent hitting model appears to predict streaky outcomes similar to what we observe during this season. At the very least, it would take a more extensive exploration to detect differences between the simulated and observed spacings between on-base events.</p>
</section>
</section>
<section id="closing-remarks" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Closing Remarks</h1>
<p>Currently a plethora amount of measures of hitting and pitching performance of players and teams are available on sites such as FanGraphs and Baseball Savant. But there is a potential that these measures are noisy in the sense that differences between players, say, are reflective of random or luck variation instead of reflecting differences in player ability. Example of noisy data are performance measures after a small number of games in a season or the performances of players in different situations (home/away, against different pitch types, etc).</p>
<p>The predictive simulation checking approach is helpful in determining the abilty component of different measures of performance. In the examples presented here, one first proposes a model that says “no effect” such as no clutch ability or cluster ability in team scoring, and then one simulates data (predictions) based on the model. If the observed effect is consistent with the simulated data, then that indicates that the proposed model is reasonable.</p>
<p>There are many illustrations of this predictive approach for model checking in baseball. Here we presented examples of clutch hitting and streaky patterns in hitting among players. The same approach is helpful for exploring situational effects of players. For example, although players differ on how they perform in home and away games, a reasonable model for these data is that the home advantage is the same for all players (a so-called bias effect). A predictive simulation can demonstrate that the observed situational data is consistent with simulations from this bias effect model.</p>
</section>
<section id="further-reading" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Further Reading</h1>
<p>The following articles from the <em>Exploring Baseball with R</em> blog describe the use of predictive simulation to detect real effects in situational and streaky scenarios. The articles include references to R code to implement these simulations.</p>
<ul>
<li><p>“Cluster Luck Scoring in the 2022 Season”, <em>Exploring Baseball with R</em> blog, https://baseballwithr.wordpress.com/2023/04/24/cluster-luck-scoring-in-2022-season/#:~:text=We%20can%20then%20compare%20the,base%20events%20to%20score%20runs.</p></li>
<li><p>“Streaky Mike Trout”, <em>Exploring Baseball with R</em> blog, https://baseballwithr.wordpress.com/2016/11/21/streaky-mike-trout/</p></li>
<li><p>“Measuring Situational Hitting”, <em>Exploring Baseball with R</em> blog, https://baseballwithr.wordpress.com/2017/02/13/measuring-situational-hitting/</p></li>
<li><p>“Extreme Ofers? Predictive Checking of a Coin Flipping Model”, <em>Exploring Baseball with R</em> blog, https://baseballwithr.wordpress.com/2021/07/19/extreme-ofers-predictive-checking-of-a-coin-flipping-model/</p></li>
<li><p>“Predictive Checking of a Streaky Model”, <em>Exploring Baseball with R</em> blog, https://baseballwithr.wordpress.com/2021/07/26/predictive-checking-of-a-streaky-model/</p></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>